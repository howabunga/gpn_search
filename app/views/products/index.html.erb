<div class="page-header">
  <h1>
    GPN Product Database
  </h1>
</div>

<%= search_form_for @q do |f| %>
<p class="lead">Narrow results:</p>

<div class="form-group">
<%= f.label :name_cont, "Product Name containing" %>
  <%= f.text_field :name_cont, :class => "form-control", :placeholder => "Enter a few characters" %>
</div>
<%= f.submit :class => "btn btn-primary btn-block" %>

<a href="/products" class="btn btn-warning btn-block">Clear filters</a>
<% end %>

<div class="row">
  <div class="col-md-12">
    <table class="table table-striped table-hover">
      <tr>
        <th>Add Favorite</th>
        <th>Image</th>
        <th>Name</th>
        <th>Brand</th>
        <th>Type</th>
        <th>Details</th>
      </tr>

      <% @products.each do |product| %>
      <tr>
        <td>
          <form action="/create_favorite" method="post">
            <!-- Hidden input for authenticity token to protect from forgery -->
            <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>">

            <!-- Label and input for product_id -->
            <input name="product_id" type="hidden" value="<%= product.id %>">

            <!-- Label and input for user_id -->
            <% if user_signed_in?%>
            <input name="user_id" type="hidden" value="<%= current_user.id %>">
            <button class="btn btn-success">
             <i class="fa fa-star"></i>
           </button>
           <% else %>
           <% end %>
         </form>

         <td><img src= "<%= product.image %>" width = "50"> </td>
         <td><%= product.name %></td>
         <td><%= product.brand.name %></td>
         <td><%= product.delivery.name %></td>

         <td>
          <a href="/products/<%= product.id %>" class="btn btn-primary">Show</a>
<!--           <a href="/products/<#%= product.id %>/edit" class="btn btn-warning">Edit</a>
  <a href="/delete_product/<#%= product.id %>" class="btn btn-danger" rel="nofollow">Delete</a> -->
</td>
</tr>
<% end %>
</table>
</div>
</div>
